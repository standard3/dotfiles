#############################
# Variables
#############################

$monitor   = DP-3, 2560x1440@165, 0x0, 1
$workspace = DP-3, 1

$kb_layout = fr
$mouse_sensitivity = -2

$color_main     = eac509
$color_shade    = d9db67
$color_inactive = 595959

# Applications
$app_term       = kitty
$app_browser    = firefox
$app_files      = thunar
$app_editor     = code
$app_screenshot = flameshot
$app_launcher   = anyrun
$app_powermgmt  = nwg-bar 

#############################
# General
#############################

exec-once = $HOME/.config/hypr/autostart

monitor   = $monitor
workspace = $workspace

general {
    gaps_in  = 3
    gaps_out = 5
    border_size = 3
    col.active_border   = rgb($color_main) rgb($color_shade) 45deg
    col.inactive_border = rgba($color_inactiveaa)

    layout = dwindle
}

misc {
    # Comment when tweaking the config
    #disable_autoreload = true

    vrr = 1
    layers_hog_keyboard_focus = false
    animate_manual_resizes = true
}

#############################
# Aesthetic
#############################

decoration {
    rounding = 5

    blur = yes
    blur_size = 5
    blur_passes = 1
    blur_new_optimizations = on

    active_opacity = 0.95
    inactive_opacity = 0.95

    dim_inactive = true
    dim_strength = 0.1
}

animations {
    enabled = yes

    bezier = easeOutQuad, 0.25, 1, 0.5, 1 # https://easings.net/#easeOutQuad
    bezier = easeInQuad,  0.11, 0, 0.5, 0 # https://easings.net/#easeInQuad

    #           name,   onoff, speed,  curve,   style
    animation = windows,    1,     3,  easeOutQuad
    animation = windowsOut, 1,     3,  easeInQuad
    animation = border,     1,    10,  default
    animation = fade,       1,     3,  default
    animation = workspaces, 1,     5,  default, slide
}

#############################
# Hyprland behaviour
#############################

# Layouts

dwindle {
    # See https://wiki.hyprland.org/Configuring/Dwindle-Layout/ for more
    pseudotile = yes
    preserve_split = yes
}

master {
    # See https://wiki.hyprland.org/Configuring/Master-Layout/ for more
    new_is_master = true
}

# Window rules
# See https://wiki.hyprland.org/Configuring/Window-Rules/ for more

## Workspaces

windowrule = opacity 0.9 silent, class: ^(discord)$
windowrule = workspace 4,        title: steam
windowrule = workspace 5,        title: ^([Yy]ou[Tt]ube)

# Firefox
windowrule   = noblur, title:^(firefox)$
windowrulev2 = float,  title:^(Firefox â€” Sharing Indicator)$
# make Firefox PiP window floating and sticky
windowrulev2 = float, title:^(Picture-in-Picture)$
windowrulev2 = pin,   title:^(Picture-in-Picture)$

# Ghidra
windowrule = tile,   title:^([Gg]hidra)(.*)$
windowrule = center, title:^([Cc]ode[Bb]rowser)(.*)$

#############################
# Input
#############################

input {
    kb_layout = $kb_layout
    numlock_by_default = true

    # Cursor focus will be detached from keyboard focus. 
    # Clicking on a window will move keyboard focus to that window.
    follow_mouse = 2

    # See https://wiki.hyprland.org/Configuring/Variables/#touchpad
    touchpad {
        natural_scroll = no
        clickfinger_behavior = true
    }

    sensitivity = $mouse_sensitivity
}

gestures {
    workspace_swipe = off
}

#############################
# Shortcuts
#############################

# See https://github.com/xkbcommon/libxkbcommon/blob/master/include/xkbcommon/xkbcommon-keysyms.h
# for keycodes

# Utilities
bind = SUPER,       RETURN, exec, $app_term
bind = SUPER,       E,      exec, $app_files
bind =      ,       PRINT,  exec, QT_QPA_PLATFORM=xcb $app_screenshot gui
bind = SUPER,       SPACE,  exec, $app_launcher
bind = SUPER,       L,      exec, swaylock -f --config ~/.config/swaylock/config
bind = SUPER SHIFT, L,      exec, swaylock -f --config ~/.config/swaylock/config && systemctl suspend
bind = SUPER,       C,      exec, cliphist list | wofi --dmenu --pre-display-cmd "echo '%s' | cut -f 2" | cliphist decode | wl-copy
bind = SUPER CTRL,  L,      exec, $app_powermgmt

# FN Keys
binde = ,XF86AudioRaiseVolume,  exec, volumectl -u up
binde = ,XF86AudioLowerVolume,  exec, volumectl -u down
binde = ,XF86AudioMute,         exec, volumectl toggle-mute
binde = ,XF86AudioMicMute,      exec, volumectl -m toggle-mute

binde = ,XF86AudioNext,         exec, playerctl next
binde = ,XF86AudioPrev,         exec, playerctl previous
binde = ,XF86AudioPlay,         exec, playerctl play-pause
binde = ,XF86AudioStop,         exec, playerctl stop

binde = ,XF86MonBrightnessUp,   exec, lightctl up
binde = ,XF86MonBrightnessDown, exec, lightctl down

# Hyprland

## Layouts
bind = SUPER, Q, killactive, 
bind = SUPER, V, togglefloating, 
bind = SUPER, P, pseudo,      # dwindle
bind = SUPER, J, togglesplit, # dwindle
bind = SUPER, F, fullscreen, 1

## Move focus with tab
bind = SUPER, tab, cyclenext,
bind = SUPER CTRL, tab, cyclenext, prev

## Move focus with arrow keys
bind = SUPER, left,  movefocus, l
bind = SUPER, right, movefocus, r
bind = SUPER, up,    movefocus, u
bind = SUPER, down,  movefocus, d

## Move active window with arrow keys
bind = SUPER SHIFT, left,  movewindow, l
bind = SUPER SHIFT, right, movewindow, r
bind = SUPER SHIFT, up,    movewindow, u
bind = SUPER SHIFT, down,  movewindow, d

## Resize active window with arrow keys
bind = SUPER ALT, left,  resizeactive, -50 0
bind = SUPER ALT, right, resizeactive, 50 0
bind = SUPER ALT, up,    resizeactive, 0 -50
bind = SUPER ALT, down,  resizeactive, 0 50

## Switch workspaces with mainMod + [1-8]
bind = SUPER, ampersand,  workspace, 1
bind = SUPER, eacute,     workspace, 2
bind = SUPER, quotedbl,   workspace, 3
bind = SUPER, apostrophe, workspace, 4
bind = SUPER, parenleft,  workspace, 5
bind = SUPER, minus,      workspace, 6
bind = SUPER, egrave,     workspace, 7
bind = SUPER, underscore, workspace, 8

## Move active window to a workspace with mainMod + SHIFT + [0-9]
bind = SUPER SHIFT, ampersand,  movetoworkspace, 1
bind = SUPER SHIFT, eacute,     movetoworkspace, 2
bind = SUPER SHIFT, quotedbl,   movetoworkspace, 3
bind = SUPER SHIFT, apostrophe, movetoworkspace, 4
bind = SUPER SHIFT, parenleft,  movetoworkspace, 5
bind = SUPER SHIFT, minus,      movetoworkspace, 6
bind = SUPER SHIFT, egrave,     movetoworkspace, 7
bind = SUPER SHIFT, underscore, movetoworkspace, 8

## Scroll through existing workspaces with mainMod + scroll
bind = SUPER, mouse_down, workspace, e+1
bind = SUPER, mouse_up,   workspace, e-1

## Move/resize windows with mainMod + LMB/RMB and dragging
bindm = SUPER, mouse:272, movewindow
bindm = SUPER, mouse:273, resizewindow
